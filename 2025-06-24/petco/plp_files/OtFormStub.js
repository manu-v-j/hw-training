(()=>{"use strict";"input:checked:not([".concat("pre-fill-mode",'="').concat("pre-filled-by-query-param",'"])');var t,e="OtFormStub.js",n="otconsent-2.0.min.js",i=["InstallCP","TriggerReceiptAction"];!function(t){t.Checked="Checked",t.Unchecked="Unchecked"}(t||(t={}));var r=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((i=i.apply(t,e||[])).next())}))},o=function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},a=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};new(function(){function t(){var t=this;this.data={cache:{},isPreview:!1,cpList:{},tenantId:"",blob:"",cf:""},this.reqSent={},this.reqCount=0,this.totalReq=0,this.stubSrc="",this.versions=[],this.apiInitialized=!1,this.crossOrigin=null,this.hasCORS=!1,this.qClone=[],this.stubApis=[],this.initVar=function(){var n=new URLSearchParams(window.location.search),i=document.querySelector("script[src*='OtFormStub']");t.stubSrc=i.src.replace(e,""),i.hasAttribute("crossorigin")&&(t.hasCORS=!0,t.crossOrigin=i.getAttribute("crossorigin"));var r=i.getAttribute("data-id")||i.getAttribute("dataId"),o=!1;r.endsWith("-test")&&(o=!0,r=r.replace("-test","")),t.data.tenantId=r,t.data.isPreview="true"===n.get("otpreview")||o,t.data.blob=i.src.split("/",3).join("/");var a=i.getAttribute("worker");t.data.cf=a||"https://consent-api.onetrust.com"},this.installCP=function(e,n){if(e)try{var i=t.data.cache,r=t.data.cpList,o=r[e];if(o){if(t.elExists(o)){if(i[o.scriptVersion])return window.OneTrust.webform[o.scriptVersion].InstallCP(e,n);o.canLoad=!0,o.scriptLoadTime="INSTANT",t.loadScript(o.scriptVersion)}}else t.getCpList(e).then((function(){if(r[e].canLoad&&i[r[e].scriptVersion])return window.OneTrust.webform[r[e].scriptVersion].InstallCP(e,n)}))}catch(t){}},this.triggerReceipt=function(e){try{return window.OneTrust.webform[t.data.cpList[e.cpId].scriptVersion].triggerReceipt(e)}catch(t){}},this.loadScript=function(e){t.totalReq++;var i=document.createElement("script");i.setAttribute("src","".concat(t.stubSrc).concat(e,"/").concat(n)),i.setAttribute("type","text/javascript"),i.setAttribute("charset","utf-8"),i.setAttribute("id","".concat(t.data.tenantId,"-").concat(e)),t.hasCORS&&i.setAttribute("crossorigin",t.crossOrigin),i.onload=function(){t.srcLoaded(e,!0),window.OneTrust.webform[e].q=a([],t.qClone,!0)},i.onerror=function(){t.srcLoaded(e,!1)},t.reqSent[e]=!0,document.body.appendChild(i)},this.fetchSdk=function(e){t.filterQ(),t.data.cpList=Object.assign(t.data.cpList,e);var n=Object.keys(e).reduce((function(n,i){var r=e[i];return("MODAL"===r.layoutType||t.elExists(r)&&"MANUAL"!==r.scriptLoadTime)&&(r.canLoad=!0,-1===n.indexOf(r.scriptVersion)&&n.push(r.scriptVersion)),n}),[]);n.forEach((function(e){t.data.cache[e]||t.reqSent[e]||t.loadScript(e)})),0===n.length&&t.initializeApi()},this.srcLoaded=function(e,n){t.reqCount++,t.data.cache[e]=n,n&&t.versions.push(e),t.reqCount===t.totalReq&&t.initializeApi()},this.initializeApi=function(){t.apiInitialized||(t.initApi(),t.apiInitialized=!0,t.openForm()),t.processQ()},this.getCpList=function(e){return r(t,void 0,void 0,(function(){var t,n,i,r;return o(this,(function(o){switch(o.label){case 0:return t={tenantId:this.data.tenantId,isPreview:this.data.isPreview.toString(),storageUrl:this.data.blob,pageUrl:window.location.href,browserLang:this.getLang()},(n=document.documentElement.lang.replace(/\_/,"-"))&&(t.htmlLang=n),e&&(t.cpId=e),i="".concat(this.data.cf,"/cfw/consent/v1/cp/list"),[4,this.otFetch(i,t)];case 1:return r=o.sent(),this.checkDomReady(r),[2]}}))}))},this.checkDomReady=function(e){"loading"!==document.readyState?t.fetchSdk(e):window.addEventListener("DOMContentLoaded",(function(){t.fetchSdk(e)}))},this.changeLang=function(e,n,i){if(e)try{if(n)return window.OneTrust.webform[t.data.cpList[n].scriptVersion].changeLang(e,n,i);t.versions.forEach((function(t){window.OneTrust.webform[t].changeLang(e,null,i)}))}catch(t){}},this.showWebform=function(e,n,i){try{if(e)return window.OneTrust.webform[t.data.cpList[e].scriptVersion].showWebform(e,n,i)}catch(t){}},this.preFill=function(e,n,i){try{if(n)return window.OneTrust.webform[t.data.cpList[n].scriptVersion].preFill(e,n,i)}catch(t){}},this.openForm=function(){try{for(var e=document.getElementsByClassName("ot-open-webform"),n=Array.from?Array.from(e):[].slice.call(e),i=0,r=n;i<r.length;i++){r[i].addEventListener("click",(function(e){var n=e.target.getAttribute("id");n&&t.installCP(n.replace("ot-",""))}))}}catch(t){}},window.otFormStubData=this.data,this.initVar(),this.getCpList()}return t.prototype.initApi=function(){var t={InstallCP:this.installCP,TriggerReceiptAction:this.triggerReceipt,cpList:this.data.cpList,changeLanguage:this.changeLang,showWebform:this.showWebform,preFill:this.preFill};window.OneTrust=Object.assign({},window.OneTrust),window.OneTrust.webform=Object.assign({},window.OneTrust.webform,t)},t.prototype.otFetch=function(t,e){return new Promise((function(n,i){var r=new XMLHttpRequest;if(r.onload=function(){try{n(JSON.parse(this.responseText))}catch(t){}},r.onerror=function(){i({status:this.status,statusText:r.statusText})},r.open("GET",t),e)for(var o in e)r.setRequestHeader(o,e[o]);r.send()}))},t.prototype.elExists=function(t){var e=t.layoutType;return e&&("MODAL"===e||"INLINE"===e&&document.getElementById(t.htmlId))},t.prototype.processQ=function(){this.stubApis.forEach((function(t){try{window.OneTrust.webform[t[1]].apply(window.OneTrust.webform,Array.prototype.slice.call(t,2))}catch(t){}})),this.stubApis=[]},t.prototype.filterQ=function(){var t=this,e=window.OtSdk;if(e&&e.q&&e.q.length){var n=e.q.filter((function(e){return"consent"!==e[0]||(i.indexOf(e[1])>-1?t.stubApis.push(e):t.qClone.push(e),!1)}));e.q=n}},t.prototype.getLang=function(){var t=navigator.languages;return t&&t.length?t[0]:navigator.language},t}())})();